<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Saved Places - Smart Travel Planning</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <style>
        /* Saved Places Page Specific Styles */
        .saved-page {
            min-height: 100vh;
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
        }

        .saved-nav {
            background: white;
            padding: 1rem 2rem;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
            display: flex;
            justify-content: space-between;
            align-items: center;
            position: sticky;
            top: 0;
            z-index: 100;
        }

        .nav-logo {
            display: flex;
            align-items: center;
            gap: 10px;
            color: #1a237e;
            text-decoration: none;
            font-size: 1.2rem;
            font-weight: 600;
        }

        .nav-logo i {
            color: #4fc3f7;
            font-size: 1.5rem;
        }

        .nav-links {
            display: flex;
            gap: 20px;
            align-items: center;
        }

        .nav-links a {
            color: #333;
            text-decoration: none;
            padding: 8px 15px;
            border-radius: 6px;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .nav-links a:hover {
            background: #f0f0f0;
        }

        .nav-links a.active {
            background: #4fc3f7;
            color: white;
        }

        .saved-container {
            max-width: 1200px;
            margin: 30px auto;
            padding: 0 20px;
        }

        .page-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
            flex-wrap: wrap;
            gap: 20px;
        }

        .page-header h1 {
            color: #1a237e;
            font-size: 32px;
        }

        .page-header h1 i {
            color: #4fc3f7;
            margin-right: 10px;
        }

        .header-actions {
            display: flex;
            gap: 15px;
        }

        .search-box {
            display: flex;
            align-items: center;
            background: white;
            border-radius: 8px;
            padding: 0 15px;
            border: 2px solid #e0e0e0;
            width: 300px;
        }

        .search-box i {
            color: #666;
        }

        .search-box input {
            flex: 1;
            border: none;
            padding: 12px;
            font-size: 14px;
            outline: none;
        }

        .filter-select {
            padding: 12px 20px;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            font-size: 14px;
            min-width: 150px;
            background: white;
        }

        .filter-select:focus {
            outline: none;
            border-color: #4fc3f7;
        }

        .saved-stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .stat-card {
            background: white;
            border-radius: 10px;
            padding: 20px;
            display: flex;
            align-items: center;
            gap: 15px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.08);
        }

        .stat-icon {
            width: 50px;
            height: 50px;
            background: linear-gradient(135deg, #4fc3f7 0%, #2196f3 100%);
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 20px;
        }

        .stat-info h3 {
            font-size: 24px;
            color: #1a237e;
            margin-bottom: 5px;
        }

        .stat-info p {
            color: #666;
            font-size: 14px;
        }

        .saved-tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 25px;
            border-bottom: 2px solid #e0e0e0;
            padding-bottom: 10px;
        }

        .tab-btn {
            padding: 12px 25px;
            background: none;
            border: none;
            cursor: pointer;
            font-size: 16px;
            font-weight: 500;
            color: #666;
            position: relative;
            transition: all 0.3s ease;
        }

        .tab-btn i {
            margin-right: 8px;
        }

        .tab-btn:hover {
            color: #1a237e;
        }

        .tab-btn.active {
            color: #1a237e;
        }

        .tab-btn.active::after {
            content: '';
            position: absolute;
            bottom: -12px;
            left: 0;
            right: 0;
            height: 3px;
            background: linear-gradient(135deg, #1a237e 0%, #311b92 100%);
            border-radius: 3px 3px 0 0;
        }

        .tab-content {
            display: none;
            animation: fadeIn 0.5s ease;
        }

        .tab-content.active {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .saved-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(350px, 1fr));
            gap: 25px;
        }

        .saved-card {
            background: white;
            border-radius: 15px;
            overflow: hidden;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.08);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            border: 1px solid #e0e0e0;
            position: relative;
        }

        .saved-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 30px rgba(0, 0, 0, 0.15);
        }

        .saved-card-header {
            position: relative;
            height: 200px;
            overflow: hidden;
        }

        .saved-image {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: transform 0.5s ease;
        }

        .saved-card:hover .saved-image {
            transform: scale(1.1);
        }

        .saved-flag {
            position: absolute;
            top: 15px;
            right: 15px;
            font-size: 2rem;
            background: white;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 3px 10px rgba(0, 0, 0, 0.2);
            z-index: 2;
        }

        .saved-type {
            position: absolute;
            top: 15px;
            left: 15px;
            background: rgba(26, 35, 126, 0.9);
            color: white;
            padding: 5px 12px;
            border-radius: 30px;
            font-size: 12px;
            font-weight: 500;
            z-index: 2;
        }

        .saved-type i {
            margin-right: 5px;
        }

        .saved-content {
            padding: 20px;
        }

        .saved-title {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 10px;
        }

        .saved-title h3 {
            color: #1a237e;
            font-size: 18px;
        }

        .saved-title h3 i {
            color: #4fc3f7;
            margin-right: 5px;
            font-size: 16px;
        }

        .saved-rating {
            background: #4fc3f7;
            color: white;
            padding: 3px 8px;
            border-radius: 4px;
            font-size: 12px;
            font-weight: 600;
        }

        .saved-location {
            color: #666;
            font-size: 14px;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .saved-location i {
            color: #4fc3f7;
        }

        .saved-description {
            color: #666;
            font-size: 14px;
            line-height: 1.5;
            margin-bottom: 15px;
            display: -webkit-box;
            -webkit-line-clamp: 2;
            -webkit-box-orient: vertical;
            overflow: hidden;
        }

        .saved-tags {
            display: flex;
            gap: 8px;
            flex-wrap: wrap;
            margin-bottom: 15px;
        }

        .saved-tag {
            background: #e3f2fd;
            color: #1a237e;
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 12px;
        }

        .saved-meta {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px 0;
            border-top: 1px solid #e0e0e0;
            border-bottom: 1px solid #e0e0e0;
            margin-bottom: 15px;
        }

        .saved-price {
            color: #1a237e;
            font-weight: 600;
            font-size: 16px;
        }

        .saved-price span {
            color: #666;
            font-size: 12px;
            font-weight: normal;
        }

        .saved-duration {
            color: #666;
            font-size: 14px;
        }

        .saved-duration i {
            color: #4fc3f7;
            margin-right: 5px;
        }

        .saved-actions {
            display: flex;
            gap: 10px;
        }

        .saved-btn {
            flex: 1;
            padding: 10px;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-weight: 500;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 5px;
            transition: all 0.3s ease;
        }

        .btn-plan {
            background: linear-gradient(135deg, #1a237e 0%, #311b92 100%);
            color: white;
        }

        .btn-view {
            background: #4fc3f7;
            color: white;
        }

        .btn-remove {
            background: #ff6b6b;
            color: white;
        }

        .btn-add {
            background: #4CAF50;
            color: white;
        }

        .saved-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 3px 10px rgba(0, 0, 0, 0.2);
        }

        .collections-section {
            margin-top: 40px;
        }

        .collections-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        .collection-card {
            background: white;
            border-radius: 10px;
            padding: 20px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.08);
            cursor: pointer;
            transition: transform 0.3s ease;
            border: 1px solid #e0e0e0;
        }

        .collection-card:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.12);
        }

        .collection-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }

        .collection-header i {
            font-size: 24px;
            color: #4fc3f7;
        }

        .collection-header h3 {
            color: #1a237e;
            font-size: 18px;
        }

        .collection-count {
            color: #666;
            font-size: 14px;
            margin-bottom: 10px;
        }

        .collection-preview {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .preview-images {
            display: flex;
        }

        .preview-image {
            width: 30px;
            height: 30px;
            border-radius: 50%;
            object-fit: cover;
            border: 2px solid white;
            margin-left: -10px;
        }

        .preview-image:first-child {
            margin-left: 0;
        }

        .recently-viewed {
            margin-top: 40px;
        }

        .recent-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }

        .recent-item {
            background: white;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
            transition: transform 0.3s ease;
            cursor: pointer;
        }

        .recent-item:hover {
            transform: translateY(-3px);
        }

        .recent-image {
            height: 120px;
            object-fit: cover;
            width: 100%;
        }

        .recent-info {
            padding: 10px;
        }

        .recent-info h4 {
            color: #1a237e;
            font-size: 14px;
            margin-bottom: 3px;
        }

        .recent-info p {
            color: #666;
            font-size: 12px;
        }

        .empty-state {
            text-align: center;
            padding: 60px 20px;
            background: white;
            border-radius: 15px;
            border: 2px dashed #e0e0e0;
        }

        .empty-state i {
            font-size: 60px;
            color: #ccc;
            margin-bottom: 20px;
        }

        .empty-state h3 {
            color: #555;
            margin-bottom: 10px;
            font-size: 24px;
        }

        .empty-state p {
            color: #888;
            margin-bottom: 20px;
        }

        @media (max-width: 768px) {
            .page-header {
                flex-direction: column;
                align-items: stretch;
            }
            
            .search-box {
                width: 100%;
            }
            
            .saved-tabs {
                overflow-x: auto;
                padding-bottom: 5px;
            }
            
            .tab-btn {
                white-space: nowrap;
            }
            
            .saved-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>

<body class="saved-page">
    <!-- Navigation -->
    <nav class="saved-nav">
        <a href="dashboard.html" class="nav-logo">
            <i class="fas fa-plane"></i>
            <span>Smart Travel</span>
        </a>
        <div class="nav-links">
            <a href="dashboard.html"><i class="fas fa-home"></i> Dashboard</a>
            <a href="itineraries.html"><i class="fas fa-calendar-alt"></i> Itineraries</a>
            <a href="saved.html" class="active"><i class="fas fa-heart"></i> Saved</a>
            <a href="settings.html"><i class="fas fa-cog"></i> Settings</a>
        </div>
    </nav>

    <div class="saved-container">
        <!-- Page Header -->
        <div class="page-header">
            <h1><i class="fas fa-heart"></i> Saved Places</h1>
            <div class="header-actions">
                <div class="search-box">
                    <i class="fas fa-search"></i>
                    <input type="text" id="searchSaved" placeholder="Search saved places..." onkeyup="filterSaved()">
                </div>
                <select class="filter-select" id="filterType" onchange="filterSaved()">
                    <option value="all">All Types</option>
                    <option value="country">Countries</option>
                    <option value="city">Cities</option>
                    <option value="attraction">Attractions</option>
                    <option value="hotel">Hotels</option>
                    <option value="restaurant">Restaurants</option>
                </select>
            </div>
        </div>

        <!-- Stats Cards -->
        <div class="saved-stats" id="savedStats">
            <div class="stat-card">
                <div class="stat-icon"><i class="fas fa-map-marker-alt"></i></div>
                <div class="stat-info">
                    <h3 id="totalSaved">0</h3>
                    <p>Total Saved</p>
                </div>
            </div>
            <div class="stat-card">
                <div class="stat-icon"><i class="fas fa-flag"></i></div>
                <div class="stat-info">
                    <h3 id="countriesSaved">0</h3>
                    <p>Countries</p>
                </div>
            </div>
            <div class="stat-card">
                <div class="stat-icon"><i class="fas fa-city"></i></div>
                <div class="stat-info">
                    <h3 id="citiesSaved">0</h3>
                    <p>Cities</p>
                </div>
            </div>
            <div class="stat-card">
                <div class="stat-icon"><i class="fas fa-utensils"></i></div>
                <div class="stat-info">
                    <h3 id="attractionsSaved">0</h3>
                    <p>Attractions</p>
                </div>
            </div>
        </div>

        <!-- Tabs -->
        <div class="saved-tabs">
            <button class="tab-btn active" onclick="switchTab('all')"><i class="fas fa-globe"></i> All</button>
            <button class="tab-btn" onclick="switchTab('countries')"><i class="fas fa-flag"></i> Countries</button>
            <button class="tab-btn" onclick="switchTab('cities')"><i class="fas fa-city"></i> Cities</button>
            <button class="tab-btn" onclick="switchTab('attractions')"><i class="fas fa-landmark"></i> Attractions</button>
            <button class="tab-btn" onclick="switchTab('hotels')"><i class="fas fa-hotel"></i> Hotels</button>
            <button class="tab-btn" onclick="switchTab('restaurants')"><i class="fas fa-utensils"></i> Restaurants</button>
        </div>

        <!-- All Tab Content -->
        <div id="all-tab" class="tab-content active">
            <div class="saved-grid" id="allSaved"></div>
        </div>

        <!-- Countries Tab Content -->
        <div id="countries-tab" class="tab-content">
            <div class="saved-grid" id="countriesSaved"></div>
        </div>

        <!-- Cities Tab Content -->
        <div id="cities-tab" class="tab-content">
            <div class="saved-grid" id="citiesSaved"></div>
        </div>

        <!-- Attractions Tab Content -->
        <div id="attractions-tab" class="tab-content">
            <div class="saved-grid" id="attractionsSaved"></div>
        </div>

        <!-- Hotels Tab Content -->
        <div id="hotels-tab" class="tab-content">
            <div class="saved-grid" id="hotelsSaved"></div>
        </div>

        <!-- Restaurants Tab Content -->
        <div id="restaurants-tab" class="tab-content">
            <div class="saved-grid" id="restaurantsSaved"></div>
        </div>

        <!-- Collections Section -->
        <div class="collections-section">
            <h2 style="color: #1a237e; margin-bottom: 20px;">Your Collections</h2>
            <div class="collections-grid" id="collectionsGrid">
                <div class="collection-card" onclick="viewCollection('wishlist')">
                    <div class="collection-header">
                        <i class="fas fa-heart"></i>
                        <h3>Wishlist</h3>
                    </div>
                    <div class="collection-count" id="wishlistCount">0 items</div>
                    <div class="collection-preview" id="wishlistPreview"></div>
                </div>
                <div class="collection-card" onclick="viewCollection('favorites')">
                    <div class="collection-header">
                        <i class="fas fa-star"></i>
                        <h3>Favorites</h3>
                    </div>
                    <div class="collection-count" id="favoritesCount">0 items</div>
                    <div class="collection-preview" id="favoritesPreview"></div>
                </div>
                <div class="collection-card" onclick="viewCollection('bucketlist')">
                    <div class="collection-header">
                        <i class="fas fa-list"></i>
                        <h3>Bucket List</h3>
                    </div>
                    <div class="collection-count" id="bucketlistCount">0 items</div>
                    <div class="collection-preview" id="bucketlistPreview"></div>
                </div>
                <div class="collection-card" onclick="createCollection()">
                    <div class="collection-header">
                        <i class="fas fa-plus-circle"></i>
                        <h3>Create New</h3>
                    </div>
                    <div class="collection-count">Create a new collection</div>
                </div>
            </div>
        </div>

        <!-- Recently Viewed Section -->
        <div class="recently-viewed">
            <h2 style="color: #1a237e; margin-bottom: 20px;">Recently Viewed</h2>
            <div class="recent-grid" id="recentlyViewed"></div>
        </div>
    </div>

    <script>
        // Initialize saved places
        let savedItems = [];
        let collections = {
            wishlist: [],
            favorites: [],
            bucketlist: []
        };
        let recentlyViewed = [];

        document.addEventListener('DOMContentLoaded', function() {
            checkLogin();
            loadSavedData();
            loadRecentlyViewed();
        });

        function checkLogin() {
            const isLoggedIn = localStorage.getItem('isLoggedIn');
            if (!isLoggedIn) {
                window.location.href = 'index.html';
            }
        }

        function loadSavedData() {
            // Load saved countries from localStorage
            const savedCountries = JSON.parse(localStorage.getItem('savedCountries') || '[]');
            
            // Transform saved countries into saved items format
            savedItems = savedCountries.map(country => ({
                id: country.id,
                type: 'country',
                name: country.name,
                location: country.capital,
                flag: country.flag,
                image: country.image || 'https://images.unsplash.com/photo-1488646953014-85cb44e25828?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&q=80',
                description: country.description,
                rating: 4.5,
                price: '$$',
                duration: '7 days',
                tags: ['Popular', 'Must Visit'],
                collection: 'wishlist',
                savedAt: country.savedAt || new Date().toISOString()
            }));

            // Add sample data for other types
            const sampleItems = [
                {
                    id: 'city1',
                    type: 'city',
                    name: 'Paris',
                    location: 'France',
                    flag: 'üá´üá∑',
                    image: 'https://images.unsplash.com/photo-1502602898657-3e91760cbb34?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&q=80',
                    description: 'The City of Light, known for its art, fashion, and culture.',
                    rating: 4.8,
                    price: '$$$',
                    duration: '5 days',
                    tags: ['Romantic', 'Culture'],
                    collection: 'favorites'
                },
                {
                    id: 'attraction1',
                    type: 'attraction',
                    name: 'Eiffel Tower',
                    location: 'Paris, France',
                    flag: 'üá´üá∑',
                    image: 'https://images.unsplash.com/photo-1543349689-9a4d426bee8e?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&q=80',
                    description: 'Iconic iron tower offering panoramic views of Paris.',
                    rating: 4.9,
                    price: '‚Ç¨25',
                    duration: '3 hours',
                    tags: ['Iconic', 'Views'],
                    collection: 'bucketlist'
                },
                {
                    id: 'hotel1',
                    type: 'hotel',
                    name: 'Ritz Paris',
                    location: 'Paris, France',
                    flag: 'üá´üá∑',
                    image: 'https://images.unsplash.com/photo-1551882547-ff40c63fe5fa?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&q=80',
                    description: 'Luxury hotel in the heart of Paris.',
                    rating: 4.9,
                    price: '‚Ç¨800/night',
                    duration: 'Luxury',
                    tags: ['Luxury', '5-Star'],
                    collection: 'favorites'
                },
                {
                    id: 'restaurant1',
                    type: 'restaurant',
                    name: 'Le Jules Verne',
                    location: 'Eiffel Tower, Paris',
                    flag: 'üá´üá∑',
                    image: 'https://images.unsplash.com/photo-1517248135467-4c7edcad34c4?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&q=80',
                    description: 'Michelin-starred restaurant in the Eiffel Tower.',
                    rating: 4.8,
                    price: '‚Ç¨‚Ç¨‚Ç¨‚Ç¨',
                    duration: '2-3 hours',
                    tags: ['Michelin', 'Fine Dining'],
                    collection: 'wishlist'
                }
            ];

            savedItems = [...savedItems, ...sampleItems];
            updateStats();
            displayAllSaved();
            updateCollections();
        }

        function updateStats() {
            const total = savedItems.length;
            const countries = savedItems.filter(item => item.type === 'country').length;
            const cities = savedItems.filter(item => item.type === 'city').length;
            const attractions = savedItems.filter(item => 
                item.type === 'attraction' || item.type === 'hotel' || item.type === 'restaurant'
            ).length;

            document.getElementById('totalSaved').textContent = total;
            document.getElementById('countriesSaved').textContent = countries;
            document.getElementById('citiesSaved').textContent = cities;
            document.getElementById('attractionsSaved').textContent = attractions;
        }

        function displayAllSaved() {
            const container = document.getElementById('allSaved');
            
            if (savedItems.length === 0) {
                container.innerHTML = getEmptyStateHTML();
                return;
            }

            container.innerHTML = savedItems.map(item => createSavedCardHTML(item)).join('');
        }

        function createSavedCardHTML(item) {
            return `
                <div class="saved-card">
                    <div class="saved-card-header">
                        <img src="${item.image}" alt="${item.name}" class="saved-image">
                        <div class="saved-flag">${item.flag || 'üè≥Ô∏è'}</div>
                        <div class="saved-type"><i class="fas ${getTypeIcon(item.type)}"></i> ${item.type}</div>
                    </div>
                    <div class="saved-content">
                        <div class="saved-title">
                            <h3><i class="fas fa-map-marker-alt"></i> ${item.name}</h3>
                            <span class="saved-rating">‚òÖ ${item.rating}</span>
                        </div>
                        <div class="saved-location">
                            <i class="fas fa-location-dot"></i> ${item.location}
                        </div>
                        <p class="saved-description">${item.description}</p>
                        <div class="saved-tags">
                            ${item.tags.map(tag => `<span class="saved-tag">${tag}</span>`).join('')}
                        </div>
                        <div class="saved-meta">
                            <span class="saved-price">${item.price} <span>approx</span></span>
                            <span class="saved-duration"><i class="far fa-clock"></i> ${item.duration}</span>
                        </div>
                        <div class="saved-actions">
                            <button class="saved-btn btn-plan" onclick="planTrip('${item.id}')">
                                <i class="fas fa-calendar-plus"></i> Plan
                            </button>
                            <button class="saved-btn btn-view" onclick="viewDetails('${item.id}')">
                                <i class="fas fa-eye"></i> View
                            </button>
                            <button class="saved-btn btn-remove" onclick="removeSaved('${item.id}')">
                                <i class="fas fa-trash"></i>
                            </button>
                        </div>
                    </div>
                </div>
            `;
        }

        function getTypeIcon(type) {
            const icons = {
                'country': 'fa-flag',
                'city': 'fa-city',
                'attraction': 'fa-landmark',
                'hotel': 'fa-hotel',
                'restaurant': 'fa-utensils'
            };
            return icons[type] || 'fa-map-marker-alt';
        }

        function getEmptyStateHTML() {
            return `
                <div class="empty-state">
                    <i class="fas fa-heart"></i>
                    <h3>No saved places yet</h3>
                    <p>Start exploring and save your favorite destinations!</p>
                    <a href="index.html#search-section" class="btn-primary">
                        <i class="fas fa-search"></i> Explore Destinations
                    </a>
                </div>
            `;
        }

        function switchTab(tab) {
            // Update tab buttons
            document.querySelectorAll('.tab-btn').forEach(btn => btn.classList.remove('active'));
            event.target.classList.add('active');

            // Update tab content
            document.querySelectorAll('.tab-content').forEach(content => content.classList.remove('active'));
            document.getElementById(`${tab}-tab`).classList.add('active');

            // Load content for selected tab
            loadTabContent(tab);
        }

        function loadTabContent(tab) {
            const filteredItems = savedItems.filter(item => 
                tab === 'all' ? true : item.type === tab.slice(0, -1) // Remove 's' from plural
            );

            const container = document.getElementById(`${tab}Saved`);
            
            if (filteredItems.length === 0) {
                container.innerHTML = getEmptyStateHTML();
            } else {
                container.innerHTML = filteredItems.map(item => createSavedCardHTML(item)).join('');
            }
        }

        function filterSaved() {
            const searchTerm = document.getElementById('searchSaved').value.toLowerCase();
            const filterType = document.getElementById('filterType').value;

            let filtered = savedItems;

            if (filterType !== 'all') {
                filtered = filtered.filter(item => item.type === filterType);
            }

            if (searchTerm) {
                filtered = filtered.filter(item => 
                    item.name.toLowerCase().includes(searchTerm) ||
                    item.location.toLowerCase().includes(searchTerm) ||
                    item.description.toLowerCase().includes(searchTerm)
                );
            }

            const currentTab = document.querySelector('.tab-btn.active').textContent.trim().toLowerCase();
            const container = document.getElementById(`${currentTab}-tab`).querySelector('.saved-grid');
            
            if (filtered.length === 0) {
                container.innerHTML = getEmptyStateHTML();
            } else {
                container.innerHTML = filtered.map(item => createSavedCardHTML(item)).join('');
            }
        }

        function updateCollections() {
            // Update collection counts
            savedItems.forEach(item => {
                if (item.collection) {
                    collections[item.collection].push(item);
                }
            });

            document.getElementById('wishlistCount').textContent = `${collections.wishlist.length} items`;
            document.getElementById('favoritesCount').textContent = `${collections.favorites.length} items`;
            document.getElementById('bucketlistCount').textContent = `${collections.bucketlist.length} items`;

            // Update preview images
            updateCollectionPreview('wishlist');
            updateCollectionPreview('favorites');
            updateCollectionPreview('bucketlist');
        }

        function updateCollectionPreview(collection) {
            const items = collections[collection].slice(0, 3);
            const previewHTML = items.map(item => 
                `<img src="${item.image}" alt="${item.name}" class="preview-image">`
            ).join('');

            document.getElementById(`${collection}Preview`).innerHTML = `
                <div class="preview-images">${previewHTML}</div>
            `;
        }

        function loadRecentlyViewed() {
            recentlyViewed = JSON.parse(localStorage.getItem('recentlyViewed') || '[]');
            const container = document.getElementById('recentlyViewed');

            if (recentlyViewed.length === 0) {
                container.innerHTML = '<p style="color: #666;">No recently viewed items</p>';
                return;
            }

            container.innerHTML = recentlyViewed.slice(0, 4).map(item => `
                <div class="recent-item" onclick="viewDetails('${item.id}')">
                    <img src="${item.image}" alt="${item.name}" class="recent-image">
                    <div class="recent-info">
                        <h4>${item.name}</h4>
                        <p>${item.location}</p>
                    </div>
                </div>
            `).join('');
        }

        function planTrip(id) {
            const item = savedItems.find(i => i.id === id);
            if (item) {
                // Add to trips
                let trips = JSON.parse(localStorage.getItem('userTrips') || '[]');
                trips.push({
                    countryId: id,
                    countryName: item.name,
                    flag: item.flag,
                    addedAt: new Date().toISOString(),
                    status: 'planning'
                });
                localStorage.setItem('userTrips', JSON.stringify(trips));
                showNotification(`Added ${item.name} to your trips!`, 'success');
            }
        }

        function viewDetails(id) {
            const item = savedItems.find(i => i.id === id);
            if (item) {
                // Add to recently viewed
                recentlyViewed = [item, ...recentlyViewed.filter(i => i.id !== id)].slice(0, 10);
                localStorage.setItem('recentlyViewed', JSON.stringify(recentlyViewed));
                
                alert(`Viewing details for ${item.name}\n\n${item.description}\n\nLocation: ${item.location}\nRating: ${item.rating}‚òÖ\nPrice: ${item.price}`);
            }
        }

        function removeSaved(id) {
            if (confirm('Are you sure you want to remove this from saved places?')) {
                savedItems = savedItems.filter(item => item.id !== id);
                localStorage.setItem('savedCountries', JSON.stringify(
                    savedItems.filter(item => item.type === 'country')
                ));
                updateStats();
                displayAllSaved();
                updateCollections();
                showNotification('Item removed from saved places', 'success');
            }
        }

        function viewCollection(collection) {
            const items = collections[collection];
            if (items.length > 0) {
                alert(`Viewing ${collection} collection\n\n${items.map(i => `‚Ä¢ ${i.name}`).join('\n')}`);
            } else {
                alert(`Your ${collection} collection is empty. Start adding items!`);
            }
        }

        function createCollection() {
            const name = prompt('Enter collection name:');
            if (name) {
                collections[name.toLowerCase()] = [];
                showNotification(`Collection "${name}" created!`, 'success');
            }
        }

        function showNotification(message, type) {
            const notification = document.createElement('div');
            notification.className = `notification-toast ${type}`;
            notification.innerHTML = `
                <i class="fas fa-${type === 'success' ? 'check-circle' : 'info-circle'}"></i>
                <span>${message}</span>
            `;
            
            document.body.appendChild(notification);
            
            setTimeout(() => notification.classList.add('show'), 100);
            setTimeout(() => {
                notification.classList.remove('show');
                setTimeout(() => notification.remove(), 400);
            }, 3000);
        }
    </script>
</body>
</html>